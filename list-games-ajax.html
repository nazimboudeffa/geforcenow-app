<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <title></title>
  </head>
  <body>
    <h1></h1>
    <div id="games"></div>
    <script type="text/javascript">
      var data;
      var gameID;
      var imgURL;

      $(document).ready(function(){

        $.ajax({
          'async': false,
          type: 'GET',
          data: "JSON",
          url: "https://static.nvidiagrid.net/supported-public-game-list/gfnpc.json",
          success: function(response){
              data = response;
          }
        });

        $('h1').append("Total number of games "+data.length);

        for (i=0; i < data.length; i++){

          gameID = data[i].id;

          var str = data[i].steamUrl;
          var steamGameID = str.replace("https://store.steampowered.com/app/", "");

          html  = "<div class='game'>";
          html += "<a id='"+steamGameID+"' target='_blank' href='"+data[i].steamUrl+"'>"+data[i].title+"</a>";
          html += "</div>";

          $('#games').append(html);

        }


        $( "a" ).hover(
          function() {
            gameID = $(this).attr('id');
            $.ajax({
              'async': false,
              type: 'GET',
              data: "JSON",
              url: "https://cors-anywhere.herokuapp.com/https://store.steampowered.com/api/appdetails?appids="+gameID,
              success: function(response){
                imgURL = response[gameID].data.header_image;
              }
            });
            $( this ).append( $( "<img src='"+imgURL+"' alt='image' height='100'></img>" ) );
          }, function() {
            $( this ).find( "img" ).last().remove();
          }
        );


      });
    </script>
    <style media="screen">
      img {
        display: block;
      }
    </style>
  </body>
</html>
